# ========================================
# PERFIL DE DESARROLLO
# Activa con: SPRING_PROFILES_ACTIVE=dev
# ========================================

spring:
  datasource:
    # En desarrollo, usar credenciales locales
    # IMPORTANTE: Configura estas variables en tu entorno local
    url: ${DB_URL:jdbc:mysql://localhost:3306/turnofacil_db}?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ${DB_USERNAME:root}
    password: ${DB_PASSWORD:root}

  jpa:
    hibernate:
      ddl-auto: validate  # Flyway gestiona el schema
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  thymeleaf:
    cache: false          # Recarga automatica de templates

  devtools:
    restart:
      enabled: true
    livereload:
      enabled: true

# ========================================
# APP CONFIG - Desarrollo
# ========================================
app:
  email:
    enabled: ${EMAIL_ENABLED:true}  # Habilitado si hay credenciales SMTP configuradas
  show-error-details: true
  dns:
    mock-enabled: true  # Usa mock DNS en desarrollo

# ========================================
# LOGGING - Verbose para desarrollo
# ========================================
logging:
  level:
    root: INFO
    com.turnofacil: DEBUG
    org.hibernate.SQL: DEBUG
    # ADVERTENCIA: Esto loguea parametros de queries incluyendo datos sensibles
    # org.hibernate.type.descriptor.sql: TRACE
    org.thymeleaf: INFO
    org.springframework.security: INFO

# ========================================
# SERVER - Desarrollo
# ========================================
server:
  error:
    include-message: always
    include-binding-errors: always
    include-stacktrace: on_param
    include-exception: true
  servlet:
    session:
      timeout: 120m       # Sesion mas larga en desarrollo
      cookie:
        secure: false     # No HTTPS en localhost
